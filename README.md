
# Azure Data Factory Analysis Toolkit

![ADF Analyzer](https://img.shields.io/badge/ADF%20Analyzer-v8.0-blue.svg) ![ADF Dashboard](https://img.shields.io/badge/ADF%20Dashboard-v9.0-green.svg) ![Python](https://img.shields.io/badge/Python-3.8+-brightgreen.svg)

This toolkit provides a suite of powerful command-line and interactive tools to perform deep analysis, dependency tracking, and visualization of Azure Data Factory (ADF) environments from their ARM template exports.

It is designed to handle large, enterprise-scale ADF environments with thousands of resources, helping you understand data lineage, identify orphaned resources, and analyze the impact of changes.

## Which File Should I Use?

This project contains several scripts that evolved over time. Here‚Äôs a quick guide to help you choose the right one for your needs.

| Your Goal | File to Use | Description |
| :--- | :--- | :--- |
| **I want a complete analysis of my ADF environment in an Excel report.** | **`adf_analyzer.py`** | ‚úÖ **This is the main tool.** It performs a full analysis, including deep parsing and dependency tracking, and outputs a comprehensive Excel report. |
| **I want to visualize my ADF environment in an interactive dashboard.** | **`adf_dashboard.py`** | ‚úÖ **This is the visualization tool.** It's a web app that reads the Excel file generated by `adf_analyzer.py` and creates interactive 3D graphs and charts. |
| I *only* need to map the connections and dependencies between resources. | `adf_dependency_tracker.py` | A specialized, standalone script focused only on tracking relationships. The `adf_analyzer.py` includes all of this functionality and more. |
| I need a simpler report on the *contents* of my resources, without deep dependency analysis. | `adf_parser.py` | A powerful parsing engine focused on resource contents. `adf_analyzer.py` is the successor and is recommended for most use cases. |
| I want to discover ARM template patterns to help build a new parser. | `arm_pattern_discovery.py` | A developer tool that analyzes the structure of an ARM template and can auto-generate starter code for a new parser. |

---

## üöÄ The Main Workflow (Recommended)

The recommended workflow involves two simple steps: **Analyze** your ARM template with the engine, and then **Visualize** the results in the dashboard.

### Step 1: Analyze Your ARM Template (`adf_analyzer.py`)

First, use the `adf_analyzer.py` script to process your ARM template and generate a detailed Excel report.

**Prerequisites:**
- Python 3.8+
- Required libraries: `pandas`, `openpyxl`, `tqdm`

Install them with pip:
```bash
pip install pandas openpyxl tqdm
```

**Usage:**

Run the script from your terminal, providing the path to your ADF ARM template JSON file.

```bash
python adf_analyzer.py /path/to/your/factory_arm_template.json
```

The script will perform a complete analysis and create an Excel file in an `output/` directory (e.g., `output/adf_analysis_enterprise_....xlsx`). This file contains all the data needed for the dashboard.

### Step 2: Visualize the Results (`adf_dashboard.py`)

Next, use the `adf_dashboard.py` script to launch a web-based dashboard that visualizes the Excel report you just created.

**Prerequisites:**
- Python 3.8+
- Required libraries: `streamlit`, `pandas`, `plotly`, `networkx`, `openpyxl`

Install them with pip:
```bash
pip install streamlit pandas plotly networkx openpyxl
```

**Usage:**

Run the Streamlit application from your terminal.

```bash
streamlit run adf_dashboard.py
```

This will open a new tab in your web browser. In the dashboard's sidebar, upload the Excel file generated in Step 1 to explore your ADF environment visually.

---

## üõ†Ô∏è Standalone & Specialized Tools

These scripts are powerful but have more focused use cases. For a complete analysis, use the main workflow above.

### `adf_dependency_tracker.py`

This is a focused, standalone script for mapping all the connections and relationships within an ADF ARM template.

- **Primary Function:** Builds a comprehensive dependency graph and identifies issues like orphaned resources and standalone pipelines.
- **Output:** A multi-sheet Excel report focused on dependency lists and relationship summaries.
- **When to Use:** Use this if you *only* need a simple, fast report on dependencies and don't require the deep content parsing of the main analyzer.

### `adf_parser.py`

This is a powerful deep-parsing engine and the direct predecessor to the `adf_analyzer.py`.

- **Primary Function:** Focuses on deconstructing the *contents* of each resource (pipelines, dataflows, datasets, etc.) into a detailed Excel report.
- **Key Feature:** Includes a `PatternDiscoveryMixin` that can dynamically generate basic parsers for unknown resource types found in the template.
- **When to Use:** Use this if you need a quick, focused report on resource contents and are not concerned with the broader dependency landscape.

### `arm_pattern_discovery.py`

This is a developer-focused tool designed to help build new parsers. It is more generic and can work on any ARM template, not just ADF.

- **Primary Function:** Analyzes the structure, property paths, and expression patterns within an ARM template.
- **Key Feature:** Its main output is not just a report, but also **auto-generated Python code** (`enhanced_parser_....py`) that can serve as a starting point for building a new, custom parser.
- **When to Use:** Use this if you are a developer looking to build a new analysis tool and need to quickly understand the schema and patterns of an unfamiliar ARM template.
